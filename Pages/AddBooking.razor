@page "/addBooking"
@using Models
@using Data
@using Authentication
@inject NavigationManager navigationManager
<h3>AddBooking</h3>
<div class="row">
    <div class="col-md-4">
        <EditForm Model="reservation">
            <div class="form-group">
                <label for="Name" class="control-label">Name</label>
                <InputDate type="date" class="form-control" @bind-Value="dateTime" />

            </div>
            <div class="form-group">
                <button type="button" class="btn btn-primary" @onclick="() => changeDateToInt()">Change date to int</button>
                <button type="button" class="btn btn-primary" @onclick="() => CreateBooking()">Save</button>
                <button type="button" class="btn btn-danger" @onclick="() => cancel()">Cancel</button>
            </div>
        </EditForm>
    </div>
    <p>@n</p>
</div>
@code {
    private Reservation reservation = new Reservation();
    private DateTime dateTime;
    int n;

    int changeDateToInt()
    {
        n = int.Parse(dateTime.ToString("ddMMyyyy"));
        return n;
    }
    protected async Task CreateBooking() {
        await ReservationManager.CreateReservation(UserService.GetUser().id, n);
        navigationManager.NavigateTo("/bookings");
    }
        void cancel() {
        navigationManager.NavigateTo("/bookings");
    }
}
